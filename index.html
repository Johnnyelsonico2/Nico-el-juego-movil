<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroids de Nico</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-image: url('cosmos.jpg');
            background-size: cover;
            background-position: left center;
            flex-direction: column;
        }
        canvas {
            display: block;
            position: absolute;
            width: 60vw;
            height: 100vh;
        }
        .controls {
            position: absolute;
            bottom: 20px;
            display: flex;
            gap: 10px;
        }
        .controls button {
            font-size: 20px;
            padding: 10px;
            border: none;
            background-color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            border-radius: 5px;
        }
        .game-over-container {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }
        .game-over-image {
            width: 180px;
        }
        .game-over-text {
            font-size: 20px;
            font-weight: bold;
            color: white;
            margin-top: 10px;
        }
        .score, .best-score {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 20px;
            color: white;
            font-weight: bold;
        }
        .best-score {
            top: 50px;
        }
    </style>
</head>
<body>
    <audio id="musica" src="Teadoramos.mp3" autoplay loop></audio>
    <audio id="risa" src="Risaa.mp3"></audio>
    <audio id="comoteven" src="comoteven.mp3"></audio>
    
    <canvas id="gameCanvas"></canvas>

    <div class="controls">
        <button id="moveLeft">‚¨Ö</button>
        <button id="shoot">üî•</button>
        <button id="moveRight">‚û°</button>
    </div>

    <div id="gameOverContainer" class="game-over-container">
        <img id="gameOverImage" class="game-over-image" src="Nicofinal.png" alt="Game Over">
        <div id="gameOverText" class="game-over-text">Como te ven, te tratan</div>
        <button id="restart">Reiniciar</button>
    </div>

    <div id="score" class="score">Puntos: 0</div>
    <div id="bestScore" class="best-score">Mejor Puntuaci√≥n: 0</div>
    
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const moveLeftBtn = document.getElementById("moveLeft");
        const moveRightBtn = document.getElementById("moveRight");
        const shootBtn = document.getElementById("shoot");
        const restartBtn = document.getElementById("restart");

        const nave = new Image();
        const asteroideImg = new Image();
        nave.src = "Nico.png";
        asteroideImg.src = "Tcplogou.png";
        let naveX, naveY, asteroides = [], proyectiles = [], gameOver = false;
        const naveSize = 67.5; // 100% m√°s chica
        const velocidadAsteroides = 3;
        let puntuacion = 0;

        // Aumentar tama√±o de los asteroides en un 30%
        const asteroideSize = 50 * 1.3; // 30% m√°s grandes

        // Reducir tama√±o de la palabra "NO" en un 20%
        const fontSize = 30 * 0.8; // 20% m√°s peque√±os

        function ajustarCanvas() {
            canvas.width = window.innerHeight * 0.6;
            canvas.height = window.innerHeight;
            naveX = canvas.width / 2 - naveSize / 2;
            naveY = canvas.height - 120;
        }

        function disparar() {
            if (!gameOver) {
                // Agregar el proyectil como un objeto con la posici√≥n y velocidad
                proyectiles.push({ x: naveX + naveSize / 2, y: naveY });
            }
        }

        function detectarColisiones() {
            proyectiles.forEach((p, pIndex) => {
                asteroides.forEach((a, aIndex) => {
                    // Detectar colisi√≥n entre el proyectil (NO) y el asteroide
                    if (
                        p.x < a.x + asteroideSize &&
                        p.x + 30 > a.x &&
                        p.y < a.y + asteroideSize &&
                        p.y + 20 > a.y
                    ) {
                        // Si hay colisi√≥n, eliminar el asteroide y el proyectil
                        asteroides.splice(aIndex, 1);
                        proyectiles.splice(pIndex, 1);
                        puntuacion += 10; // Aumentar puntos por destruir un asteroide
                        document.getElementById("score").innerText = `Puntos: ${puntuacion}`;
                    }
                });
            });
        }

        function actualizarJuego() {
            if (gameOver) return;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.drawImage(nave, naveX, naveY, naveSize, naveSize);
            
            proyectiles.forEach((p, i) => {
                p.y -= 5; // Movimiento hacia arriba de los proyectiles
                ctx.fillStyle = "white";
                ctx.font = `${fontSize}px Arial`; // Fuente y tama√±o de la palabra "NO"
                ctx.fillText("NO", p.x - 15, p.y); // Dibujamos la palabra "NO"
                if (p.y < 0) proyectiles.splice(i, 1); // Eliminar proyectiles fuera de la pantalla
            });
            
            asteroides.forEach((a, i) => {
                a.y += velocidadAsteroides;
                ctx.drawImage(asteroideImg, a.x, a.y, asteroideSize, asteroideSize); // Dibujar asteroides m√°s grandes
                if (a.y > canvas.height) asteroides.splice(i, 1);
                
                if (naveX < a.x + asteroideSize && naveX + naveSize > a.x && naveY < a.y + asteroideSize && naveY + naveSize > a.y) {
                    gameOver = true;
                    document.getElementById("gameOverContainer").style.display = "block";
                }
            });

            detectarColisiones(); // Verificar colisiones despu√©s de cada actualizaci√≥n
            requestAnimationFrame(actualizarJuego);
        }

        function reiniciarJuego() {
            gameOver = false;
            asteroides = [];
            proyectiles = [];
            puntuacion = 0;
            document.getElementById("score").innerText = `Puntos: ${puntuacion}`;
            document.getElementById("gameOverContainer").style.display = "none";
            actualizarJuego();
        }

        window.addEventListener("resize", ajustarCanvas);
        ajustarCanvas();

        moveLeftBtn.addEventListener("click", () => {
            if (naveX > 0) naveX -= 20;
        });
        moveRightBtn.addEventListener("click", () => {
            if (naveX < canvas.width - naveSize) naveX += 20;
        });
        shootBtn.addEventListener("click", disparar);
        restartBtn.addEventListener("click", reiniciarJuego);
        
        setInterval(() => {
            if (!gameOver) asteroides.push({ x: Math.random() * (canvas.width - asteroideSize), y: 0 });
        }, 1000);

        actualizarJuego();
    </script>
</body>
</html>
